{% macro menu(
    class=false,
    has_icon=false,
    aria_label,
    items
    ) %}

    {% if items == undefined %}
        {% set items = [
            {
                title: "Menu Item One",
                href: "#",
                icon: {
                    name: "facebook",
                    label: "Facebook"
                }
            },
            {
                title: "Menu Item Two",
                href: "#",
                icon: {
                    name: "mail",
                    label: "Mail"
                }
            },
            {
                title: "Very Long Menu Item to Test Content Resiliency when Text Wraps",
                href: "#",
                icon: {
                    name: "twitter",
                    label: "Twitter"
                }
            }
        ] %}
    {% endif %}

    {% if aria_label == undefined %}
        {% set aria_label = title_text %}
    {% endif %}

    <div class="spirit-menu{{ ' ' + class if class }}{{ ' ' + size_class if size_class }}" aria-label="{{ aria_label }}">
        <ul class="spirit-menu__list">
            {% for item in items %}
                <li class="spirit-menu__item">
                    <a href="{{ item.href }}" class="spirit-menu__link" aria-label="{{ aria_label }}">
                        {% if has_icon %}
                            {{ icon(
                                name=item.icon.name,
                                label=item.icon.label
                            ) }}
                        {% endif %}
                        <span class="spirit-menu__text">{{ item.title | safe }}</span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endmacro %}
